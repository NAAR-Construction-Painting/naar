<!DOCTYPE html>
<html lang="en">

<head>
  <!-- needed for the favicon-->
  <link rel="icon" href="images/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game</title>
  <!-- Bootstrap Stylesheet-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <meta name="description" content="This is an example of a meta description. This 
  will often show up in search results so it is important to write a high quality 
  description for each page of a website">

  <link rel="stylesheet" href="style.css">
</head>

<body onload="startGame()">

  <header>
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-2">
          <img src="images/logos.png" height="159" width="300" alt="" class="img-fluid">
        </div>
        <div class="col-sm-10">
          <h1>NAAR Construction & Painting LLC </h1>
        </div>
      </div>
    </div>
  </header>

  <nav>
    <ul>
      <div class="container-fluid">
        <div class="row">
          <div class="col-sm-2"></div>
          <div class="col-sm-2">
            <li><a href="index.html"><button><i class="fa fa-home" aria-hidden="true"></i> Home</button></a></li>
          </div>
          <div class="col-sm-2">
            <li><a href="gallery.html"><button><i class="fa fa-camera-retro" aria-hidden="true"></i> Gallery</button></a></li>
          </div>
          <div class="col-sm-2">
            <li><a href="contact.html"><button><i class="fa fa-envelope-o" aria-hidden="true"></i> Contact us</button></a></li>
          </div>
          <div class="col-sm-2">
            <li><a href="game.html"><button><i class="fa fa-gamepad" aria-hidden="true"></i>play a game?</button></a></li>
          </div>
          <div class="col-sm-2"></div>
        </div>
      </div>
    </ul>
  </nav>

  <main>
    <div id="game"></div>
    <div class="game-controls desktop">
		<button class="myButton" onmousedown="accelerate(-0.2)" onmouseup="accelerate(0.05)">FLAP WINGS</button>
		<a href="" ><button class="myButton">PLAY AGAIN</button></a>
	</div>
					
	<div class="game-controls mobile">
		<button class="myButton" ontouchstart="accelerate(-0.2)" ontouchend="accelerate(0.05)">FLAP WINGS</button>
		<a href="" ><button class="myButton">PLAY AGAIN</button></a>
	</div>


    <script>
      var myGamePiece;
      var myObstacles = [];
      var myScore;
	  var canvasWidth = 640;
	  var canvasHeight = 360;
	  
	  if (window.innerWidth < 768){
		canvasWidth = 360;
		canvasHeight= 360;
	  }


      function startGame() {
        myGamePiece = new component(30, 30, "images/irregular_image.png", 10, 120, "image");
        myGamePiece.gravity = 653.33;
        myScore = new component("30px", "Consolas", "red", 420, 40, "text");
        myGameArea.canvas.style.backgroundColor = "#6d6fa1";
        myGameArea.start();
      }

      var myGameArea = {
        canvas: document.createElement("canvas"),
        start: function () {
          this.canvas.width = canvasWidth;
          this.canvas.height = canvasHeight;
          this.context = this.canvas.getContext("2d");
          var myGame = document.getElementById("game");
          myGame.insertBefore(this.canvas, myGame.childNodes[0]);
          this.frameNo = 0;
          this.interval = setInterval(updateGameArea, 15);
        },
        clear: function () {
          this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
        },
      };

      function component(width, height, imageSrc, x, y, type) {
        this.type = type;
        this.image = new Image();
        this.image.src = imageSrc;
        this.width = width;
        this.height = height;
        this.speedX = 0;
        this.speedY = 0;
        this.x = x;
        this.y = y;
        this.gravity = 0;
        this.gravitySpeed = 0;

        this.update = function () {
          ctx = myGameArea.context;
          if (this.type == "image") {
            ctx.drawImage(this.image, this.x, this.y, this.width, this.height);
          } else {
            ctx.fillStyle = this.color;
            ctx.fillRect(this.x, this.y, this.width, this.height);
          }
        };

        this.newPos = function () {
          this.gravitySpeed += this.gravity;
          this.x += this.speedX;
          this.y += this.speedY + this.gravitySpeed;
          this.hitBottom();
        };

        this.hitBottom = function () {
          var rockbottom = myGameArea.canvas.height - this.height;
          if (this.y > rockbottom) {
            this.y = rockbottom;
            this.gravitySpeed = 0;
          }
        };

        this.crashWith = function (otherobj) {
          var myleft = this.x;
          var myright = this.x + this.width;
          var mytop = this.y;
          var mybottom = this.y + this.height;
          var otherleft = otherobj.x;
          var otherright = otherobj.x + otherobj.width;
          var othertop = otherobj.y;
          var otherbottom = otherobj.y + otherobj.height;

          // Pixel-level collision detection
          for (var i = myleft; i < myright; i++) {
            for (var j = mytop; j < mybottom; j++) {
              if (
                i > otherleft &&
                i < otherright &&
                j > othertop &&
                j < otherbottom
              ) {
                return true;
              }
            }
          }
          return false;
        };
      }

      function updateGameArea() {
    var x, height, gap, minHeight, maxHeight, minGap, maxGap;
    for (i = 0; i < myObstacles.length; i += 1) {
        if (myGamePiece.crashWith(myObstacles[i])) {
            return;
        }
    }
    myGameArea.clear();
    myGameArea.frameNo += 1;
    if (myGameArea.frameNo == 1 || everyinterval(150)) {
        x = myGameArea.canvas.width;
        minHeight = 20;
        maxHeight = 200;
        height = Math.floor(
            Math.random() * (maxHeight - minHeight + 1) + minHeight
        );
        minGap = 50;
        maxGap = 200;
        gap = Math.floor(Math.random() * (maxGap - minGap + 1) + minGap);
        myObstacles.push(
            new component(20, height, "#0f0a57", x, 0)
        );
        myObstacles.push(
            new component(20, x - height - gap, "#0f0a57", x, height + gap)
        );
    }
    for (i = 0; i < myObstacles.length; i += 1) {
        myObstacles[i].x += -1;
        myObstacles[i].update();
    }
    myGamePiece.newPos();
    myGamePiece.update();
    myScore.text = "SCORE: " + myGameArea.frameNo;
    myScore.update();  // Draw the score after drawing the game piece
}

      function everyinterval(n) {
        if ((myGameArea.frameNo / n) % 1 == 0) {
          return true;
        }
        return false;
      }

      function accelerate(n) {
        myGamePiece.gravity = n;
      }
    </script>

  </main>

  <footer>
		<div class="container-fluid">
			<div class="row">
				<div class="col-sm-6">
					<blockquote><h5>Don't miss out on our creative updates!</h5></blockquote>
				</div>
				<div class="col-sm-6">
					<div class="row">
						<div class="col-sm-4">
							<a href="https://instagram.com/naar.construction.painting?igshid=OGQ5ZDc2ODk2ZA=="><i class="fa fa-instagram instagram-icon" aria-hidden="true"></i>
							<h6>Check Out our instagram</h6></a>
						</div>
						<div class="col-sm-4">
							<i class="fa fa-linkedin-square linkedin-icon" aria-hidden="true"></i>
							<h6>Check Out our Linkedin</h6>
						</div>
						<div class="col-sm-4">
							<i class="fa fa-language language-icon" aria-hidden="true"></i>
							<h6>Espa√±ol</h6>
						</div>
					</div>
				</div>
			</div>
		</div>
						
		<small>&copy; Daniel Saavedra. All rights reserved.</small>
	</footer>

  <!--jQuery, Popper, and Bootstrap Javascript files-->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>